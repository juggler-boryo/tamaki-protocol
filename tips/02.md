# TIP-02

## 基本プロトコルフロー説明

このTIPは、全ての実装者が実装すべき基本プロトコルを定義します。新しいTIPは、ここで説明される構造やフローに新しいオプション（または必須）フィールド、メッセージ、機能を追加することができます。

## Event

```jsonc
{
  "id": <シリアライズされたイベントデータのsha256ハッシュを32バイトの小文字16進数でエンコードしたもの>,
  "kind": <0から65535までの整数>,
  "organizer_uid": <イベントを作成したユーザーのID>,
  "created_at": <UNIXタイムスタンプ>,
}
```

## Kinds

Kindsは、クライアントが各イベントの意味と各イベントの他のフィールドをどのように解釈すべきかを指定します。

このTIPは2つの基本的なkindsを定義します：

- `0`: **わくわくタイム**: イベントのメンバー、出資を募れます。`title` `memo` `participants_uids` `price`フィールドにメモを記載することができます。

```jsonc
{
  "id": "114514",
  "kind": 0,
  "organizer_uid": "114514",
  "created_at": 114514,
  "participants_uids": [<イベントに参加するユーザーのID配列>],
  "title": <イベントのタイトル>,
  "memo": <メモ>,
  "price": <値段、-1 未定、0~円>,
  "is_archived": <終わったか>
}
```

- `1`: **お風呂券**: お風呂券の発行や使用を表します。`memo` `participants_uids`フィールドにメモを記載することができます。

```jsonc
{
  "id": "114514",
  "kind": 1,
  "organizer_uid": "114514",
  "created_at": 114514,
  "participants_uids": [<イベントに参加するユーザーのID配列>],
  "memo": <メモ>
}
```
